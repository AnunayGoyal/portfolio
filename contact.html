<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact | Anunay Goyal</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* Internal style for clickable email/phone hover effect */
        .interactive-link {
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .interactive-link:hover {
            color: var(--accent); /* Turns Neon Green on hover */
        }
    </style>
</head>
<body>

    <nav class="navbar">
        <div class="logo">&lt;anunay<span>@contact</span> /&gt;</div>
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="projects.html">Projects</a></li>
            <li><a href="education.html">Education</a></li>
            <li><a href="https://www.cyvanta.in" target="_blank">Blog <i class="fas fa-external-link-alt"></i></a></li>
            
            <li><a href="contact.html" class="nav-btn active">Contact</a></li>
        </ul>
        <div class="burger">
            <div class="line1"></div><div class="line2"></div><div class="line3"></div>
        </div>
    </nav>

    <section class="section">
        <div class="container">
            <div class="grid" style="grid-template-columns: 1fr 1fr;">
                
                <div>
                    <h2>Get In Touch</h2>
                    <p>I am actively seeking opportunities in SOC Analysis, Penetration Testing, and GRC roles. Feel free to reach out.</p>
                    
                    <div style="margin-top: 2rem;">
                        <p style="margin-bottom:15px; display: flex; align-items: center;">
                            <i class="fas fa-envelope" style="color:var(--accent); width:25px; margin-right: 5px;"></i> 
                            <a href="mailto:anunaygoyal16@gmail.com" class="interactive-link">
                                anunaygoyal16@gmail.com
                            </a>
                        </p>

                        <p style="margin-bottom:15px; display: flex; align-items: center;">
                            <i class="fas fa-phone" style="color:var(--accent); width:25px; margin-right: 5px;"></i> 
                            <a href="tel:+918449805996" class="interactive-link">
                                +91 8449805996
                            </a>
                        </p>

                        <p style="margin-bottom:15px;">
                            <i class="fas fa-map-marker-alt" style="color:var(--accent); width:25px;"></i> 
                            Bhopal, India
                        </p>
                    </div>

                    <div class="social-icons">
                        <a href="https://www.linkedin.com/in/anunay-goyal" target="_blank" title="LinkedIn">
                            <i class="fab fa-linkedin"></i>
                        </a>
                        <a href="https://github.com/AnunayGoyal" target="_blank" title="GitHub">
                            <i class="fab fa-github"></i>
                        </a>
                        
                        <a href="https://tryhackme.com/p/Li4x" target="_blank" title="TryHackMe">
                            <i class="fas fa-terminal"></i>
                        </a>
                        
                        <a href="https://leetcode.com/u/AnunayGoyal" target="_blank" title="LeetCode">
                            <i class="fas fa-code"></i>
                        </a>
                        <a href="https://www.instagram.com/goyal_anunay" target="_blank" title="Instagram">
                            <i class="fab fa-instagram"></i>
                        </a>
                    </div>

                    <div style="margin-top: 3rem;">
                        <a href="assets/docs/Anunay_Portfolio.pdf" download class="btn">
                            <i class="fas fa-download"></i> Download Resume
                        </a>
                    </div>
                </div>

                <div class="card">
                    <h3>&gt;_ Send Message</h3>
                    
                    <form id="contact-form" action="https://formspree.io/f/xldkajor" method="POST">
                        
                        <label style="font-size:0.9rem; color:var(--text-muted);">Name:</label>
                        <input type="text" name="name" required placeholder="Enter your name">
                        
                        <label style="font-size:0.9rem; color:var(--text-muted);">Email:</label>
                        <input type="email" name="email" required placeholder="Enter your email">
                        
                        <label style="font-size:0.9rem; color:var(--text-muted);">Message:</label>
                        <textarea name="message" rows="5" required placeholder="Type your message..."></textarea>
                        
                        <input type="text" name="_gotcha" style="display:none">
                        <input type="hidden" name="_subject" value="New Submission from Portfolio">

                        <button type="submit" class="btn" style="width:100%;">Execute Send</button>
                        
                        <p id="form-status" style="margin-top:15px; font-weight:bold; display:none;"></p>
                    </form>
                </div>
                </div>
        </div>
    </section>

    <script src="assets/js/main.js"></script>

    <script>
        var form = document.getElementById("contact-form");
        var statusMsg = document.getElementById("form-status");
        var submitBtn = form.querySelector("button[type='submit']");
        
        // THE LOCK VARIABLE: Keeps track if we are currently busy sending
        var isSubmitting = false;

        // Initialize text style
        statusMsg.style.transition = "opacity 1s ease-in-out";
        statusMsg.style.opacity = "0"; 

        async function handleSubmit(event) {
            event.preventDefault(); // Stop page reload
            
            // 1. THE CHECK: If we are already submitting, STOP IMMEDIATELY.
            if (isSubmitting) {
                return;
            }

            // 2. LOCK THE DOOR
            isSubmitting = true;

            // Visual Feedback
            submitBtn.disabled = true;
            var originalBtnText = submitBtn.innerText;
            submitBtn.innerText = "Sending...";
            submitBtn.style.opacity = "0.7";

            var data = new FormData(event.target);

            fetch(event.target.action, {
                method: form.method,
                body: data,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    // SUCCESS
                    statusMsg.style.display = "block";
                    setTimeout(() => { statusMsg.style.opacity = "1"; }, 10);
                    statusMsg.style.color = "var(--accent)";
                    statusMsg.innerHTML = ">_ Message transmission successful.";
                    form.reset(); 

                    // Hide message after 7s
                    setTimeout(function() {
                        statusMsg.style.opacity = "0"; 
                        setTimeout(function() {
                            statusMsg.style.display = "none";
                        }, 1000); 
                    }, 7000);

                } else {
                    // ERROR
                    response.json().then(data => {
                        if (Object.hasOwn(data, 'errors')) {
                            statusMsg.innerHTML = data["errors"].map(error => error["message"]).join(", ");
                        } else {
                            statusMsg.innerHTML = ">_ Transmission failed. formatting error.";
                        }
                        statusMsg.style.display = "block";
                        setTimeout(() => { statusMsg.style.opacity = "1"; }, 10);
                        statusMsg.style.color = "#ff4444";
                    })
                }
            }).catch(error => {
                statusMsg.innerHTML = ">_ Critical connection error.";
                statusMsg.style.display = "block";
                setTimeout(() => { statusMsg.style.opacity = "1"; }, 10);
                statusMsg.style.color = "#ff4444";
            }).finally(() => {
                // 3. UNLOCK THE DOOR (Allow new messages only after this one finishes)
                isSubmitting = false;
                submitBtn.disabled = false;
                submitBtn.innerText = originalBtnText;
                submitBtn.style.opacity = "1";
            });
        }

        form.addEventListener("submit", handleSubmit);
    </script>
</body>
</html>